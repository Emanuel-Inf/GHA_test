name: JSON Matrix über Outputs übergeben

on:
  push:
    branches:
      - main

jobs:
  job1:
    runs-on: ubuntu-latest
    outputs:
      testmatrix: ${{ steps.create_matrix.outputs.matrix }}

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Erstelle JSON Matrix als Output
        id: create_matrix
        run: |
          # Python-Skript zum Erstellen der JSON-Matrix
          print("Hello, World!")
          
  job2:
    runs-on: ubuntu-latest
    needs: job1
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Zeige die übergebene JSON Matrix
        run: |
          # Empfangener JSON-Output aus Job1
          echo "Empfangene JSON Matrix:"
          echo "${{ needs.job1.outputs.testmatrix }}"

          # Verarbeite den JSON-String mit jq
          echo "Verarbeitung mit jq:"
          echo "${{ needs.job1.outputs.testmatrix }}" | jq .
